<div class="content">
  <div class="inner-content">
    <div class="search-container">
      <mat-form-field appearance="outline" class="search-field">
        <button mat-icon-button matPrefix (click)="onSearch()">
          <mat-icon>search</mat-icon>
        </button>
        <input matInput placeholder="Search User" [(ngModel)]="searchTerm" (keyup.enter)="onSearch()">
      </mat-form-field>
  
      <!-- Add New User button on the right -->
      <button mat-raised-button class="add-user-btn" routerLink="/employee-users/add">
        <mat-icon>add</mat-icon>
        <span class="btn-text">Add New User</span>
        <span class="btn-icon-only" fxHide.gt-xs="true">+</span>
      </button>
    </div>

    <mat-card>
      <mat-card-content>
        <!-- Mobile View -->
        <div class="mobile-view" fxHide.gt-xs="true">
          <div class="mobile-user-card" *ngFor="let user of dataSource?.data">
            <div class="mobile-card-header">
              <div class="user-name">
                <span class="value">{{ user.firstName }} {{ user.lastName }}</span>
              </div>
            </div>
            
            <div class="mobile-card-content">
              <div class="mobile-row">
                <span class="label">Email:</span>
                <span class="value email">{{ user.email }}</span>
              </div>
              <div class="mobile-row">
                <span class="label">Contact:</span>
                <span class="value">{{ user.contactNumber }}</span>
              </div>
              <div class="mobile-row">
                <span class="label">Role:</span>
                <span class="value">{{ user.role?.name || 'N/A' }}</span>
              </div>
              <div class="mobile-row">
                <span class="label">Created:</span>
                <span class="value">{{ user.dateCreated | date: 'MM/dd/yyyy' }}</span>
              </div>
            </div>
            
            <div class="mobile-card-actions">
              <button mat-icon-button class="view-btn" [routerLink]="'/employee-users/' + user.employeeUserCode">
                <mat-icon>visibility</mat-icon>
              </button>
              <button mat-icon-button class="edit-btn" [routerLink]="'/employee-users/' + user.employeeUserCode + '/edit'">
                <mat-icon>edit</mat-icon>
              </button>
            </div>
          </div>
          
          <!-- Mobile Pagination -->
          <div class="mobile-pagination" *ngIf="dataSource?.data?.length">
            <button mat-icon-button [disabled]="pageIndex === 0" (click)="pageChange({pageIndex: pageIndex - 1, pageSize: pageSize})">
              <mat-icon>chevron_left</mat-icon>
            </button>
            <span class="page-info">Page {{ pageIndex + 1 }} of {{ totalPages }}</span>
            <button mat-icon-button [disabled]="pageIndex >= totalPages - 1" (click)="pageChange({pageIndex: pageIndex + 1, pageSize: pageSize})">
              <mat-icon>chevron_right</mat-icon>
            </button>
          </div>
          
          <!-- No Data State -->
          <div class="no-data-mobile" *ngIf="!dataSource?.data?.length && !isLoading">
            <mat-icon>search_off</mat-icon>
            <span>No users found</span>
          </div>
          
          <!-- Loading State -->
          <div class="loading-mobile" *ngIf="isLoading">
            <mat-spinner diameter="40"></mat-spinner>
            <span>Loading users...</span>
          </div>
        </div>

        <!-- Desktop View -->
        <div class="desktop-view" fxHide.xs="true">
          <app-data-table
            [isLoading]="isLoading"
            [dataSource]="dataSource"
            [columnDefs]="appConfig.config.tableColumns.employeeUsers"
            [total]="total"
            [pageIndex]="pageIndex"
            [pageSize]="pageSize"
            (pageChange)="pageChange($event)"
            (sortChange)="sortChange($event)"
            (filterChange)="filterChange($event)">
          </app-data-table>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>