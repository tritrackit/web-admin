<mat-toolbar color="#fff" class="mat-elevation-z4">
  <span id="title">Change Password</span>
  <span class="toolbar-item-spacer"></span>
  <button
    mat-raised-button
    color="primary"
    matTooltip="Update profile"
    [disabled]="!formIsReady && !formIsValid"
    form="changePasswordForm"
    type="submit">
    Update Password
  </button>
</mat-toolbar>
<div class="content">
  <div class="inner-content" style="max-width: 720px!important">
    <mat-card>
      <mat-card-content>
        <div fxFlex="100" class="content-inner" fxLayout="column">
          <form
            [formGroup]="changePasswordForm"
            fxLayout="row wrap"
            id="changePasswordForm"
            (ngSubmit)="onSubmitChangePassword()">
            <fieldset fxFlex="100" fxLayout="column" style="gap: 16px">
              <mat-form-field
                appearance="outline"
                fxFlex="100">
                <mat-label>Current Password</mat-label>
                <input
                  matInput
                  #currentPassword
                  type="password"
                  placeholder="Current Password"
                  formControlName="currentPassword"
                  name="password"
                  role="presentation"
                  autocomplete="new-currentPassword"
                />
                <mat-icon
                  class="icon-right"
                  (click)="
                    currentPassword.type =
                    currentPassword.type === 'password' ? 'text' : 'password'"
                  style="cursor: pointer"
                  matSuffix>{{
                    currentPassword.type === "password"
                      ? "visibility"
                      : "visibility_off"
                  }}</mat-icon>
                <mat-error
                  *ngIf="getError('currentPassword') !== (null || undefined)">{{
                    (getError("currentPassword") && getError("currentPassword").required
                      ? "Please enter current password"
                      : "") ||
                      (getError("currentPassword") && getError("currentPassword").invalid
                        ? "Password was incorrect!"
                        : "")
                  }}</mat-error>
              </mat-form-field>
              <mat-form-field
                appearance="outline"
                fxFlex="100">
                <mat-label>New Password</mat-label>
                <input
                  matInput
                  #password
                  type="password"
                  placeholder="New Password"
                  formControlName="password"
                  name="password"
                  role="presentation"
                  autocomplete="new-password"
                />
                <mat-icon
                  class="icon-right"
                  (click)="
                    password.type =
                      password.type === 'password' ? 'text' : 'password'"
                  style="cursor: pointer"
                  matSuffix>{{
                    password.type === "password"
                      ? "visibility"
                      : "visibility_off"
                  }}</mat-icon>
                <mat-error
                  *ngIf="getError('password') !== (null || undefined)">{{
                    (getError("password") && getError("password").required
                      ? "Please enter new password"
                      : "") ||
                      (getError("password") && getError("password").minlength
                        ? "Please enter atleast 6 charcters"
                        : "") ||
                      (getError("password") && getError("password").maxlength
                        ? "Only maximum of 16 characters are allowed"
                        : "")
                  }}</mat-error>
              </mat-form-field>
              <mat-form-field
                appearance="outline"
                fxFlex="100">
                <mat-label>Confirm Password</mat-label>
                <input
                  matInput
                  type="password"
                  #confirmPassword
                  placeholder="Confirm password"
                  formControlName="confirmPassword"
                  name="confirmPassword"
                  [errorStateMatcher]="matcher"
                  role="presentation"
                  autocomplete="new-confirmPassword"/>
                <mat-icon
                  class="icon-right"
                  (click)="
                    confirmPassword.type =
                      confirmPassword.type === 'password'
                        ? 'text'
                        : 'password'
                  "
                  style="cursor: pointer"
                  matSuffix>
                  {{
                    confirmPassword.type === "password"
                      ? "visibility"
                      : "visibility_off"
                  }}
                </mat-icon>
                <mat-error
                  *ngIf="getError('confirmPassword') !== (null || undefined)">
                  {{
                    getError("confirmPassword") &&
                    getError("confirmPassword").notMatched
                      ? "Please confirm your password"
                      : ""
                  }}
                </mat-error>
              </mat-form-field>
            </fieldset>
          </form>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
